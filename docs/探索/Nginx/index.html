<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="æˆ‘çš„ç§˜å¯†åŸºåœ° Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="æˆ‘çš„ç§˜å¯†åŸºåœ° Blog Atom Feed"><title data-react-helmet="true">Nginx | æˆ‘çš„ç§˜å¯†åŸºåœ°</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://physicshi.github.io/docs/æ¢ç´¢/Nginx"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Nginx | æˆ‘çš„ç§˜å¯†åŸºåœ°"><meta data-react-helmet="true" name="description" content="`shell"><meta data-react-helmet="true" property="og:description" content="`shell"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://physicshi.github.io/docs/æ¢ç´¢/Nginx"><link data-react-helmet="true" rel="alternate" href="https://physicshi.github.io/docs/æ¢ç´¢/Nginx" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://physicshi.github.io/docs/æ¢ç´¢/Nginx" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.28eae8ec.css">
<link rel="preload" href="/assets/js/runtime~main.affe4ded.js" as="script">
<link rel="preload" href="/assets/js/main.f9b84728.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_RZKW">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_RFGx themedImage--light_Ble8 navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_RFGx themedImage--dark_wwiP navbar__logo"><b class="navbar__title">ç§˜å¯†åŸºåœ°</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">ç¬”è®°ğŸ“’</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/physicshi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_mu0C"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_nWAW react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_MFxJ">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_MFxJ">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_IIrL"><button class="clean-btn backToTopButton_x+Rm" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_psz0"><div class="sidebar_aYCW"><nav class="menu thin-scrollbar menu_h+Ol menuWithAnnouncementBar_GKH3"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro">å†™åœ¨å‰é¢</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">æµè§ˆå™¨</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CSS</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">JavaScript</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">TypeScript</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Webpack</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Vite</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Babel</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">React</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">NodeJS</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">æ¢ç´¢</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/æ¢ç´¢/Rust">Rust</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/æ¢ç´¢/Go">Go</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/æ¢ç´¢/MySQL">MySQL</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/æ¢ç´¢/Nginx">Nginx</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/æ¢ç´¢/Docker">Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/æ¢ç´¢/OS">OS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/æ¢ç´¢/éƒ¨ç½²">éƒ¨ç½²</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/æ¢ç´¢/CookieSessionToken">CookieSessionToken</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/æ¢ç´¢/ä¸€äº›é¢è¯•">ä¸€äº›é¢è¯•</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/æ¢ç´¢/Vim">Vim</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/æ¢ç´¢/Git">Git</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">leetcode</a></li></ul></nav></div></aside><main class="docMainContainer_jMVY"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_+GTl"><div class="docItemContainer_RH7h"><article><div class="tocCollapsible_y1bX tocMobile_zI+Y"><button type="button" class="clean-btn tocCollapsibleButton_U+cm">On this page</button></div><div class="markdown"><header><h1>Nginx</h1></header><div class="codeBlockContainer_JfZT"><div class="codeBlockContent_4mTi shell"><pre tabindex="0" class="prism-code language-shell codeBlock_P3uO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_+v3f"><span class="token-line" style="color:#393A34"><span class="token plain">brew update</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ww6L clean-btn">Copy</button></div></div><div class="codeBlockContainer_JfZT"><div class="codeBlockContent_4mTi shell"><pre tabindex="0" class="prism-code language-shell codeBlock_P3uO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_+v3f"><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> nginx</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ww6L clean-btn">Copy</button></div></div><p>å®‰è£…æˆåŠŸåï¼Œå¯æ‰§è¡Œè„šæœ¬ä¼šè‡ªåŠ¨åŠ å…¥ç¯å¢ƒå˜é‡ï¼›</p><p>å…¶ä¸­å…³é”®é…ç½®åŠé»˜è®¤è·¯å¾„å¦‚ä¸‹ï¼š</p><ul><li>å®‰è£…ç›®å½•ï¼š<code>--prefix=/opt/homebrew/Cellar/nginx/1.21.5</code></li><li>æ‰§è¡Œè„šæœ¬ï¼š <code>/opt/homebrew/Cellar/nginx/1.21.5/bin/nginx</code></li><li>é…ç½®æ–‡ä»¶ï¼š <code>/opt/homebrew/etc/nginx/nginx.conf</code></li><li>æ—¥å¿—æ–‡ä»¶ï¼š <code>/opt/homebrew/var/log/nginx/access.log</code></li><li>é”™è¯¯æ—¥å¿—ï¼š <code>/opt/homebrew/var/log/nginx/error.log</code></li></ul><p>å¯åŠ¨ï¼š<code>nginx</code> ï¼Œç„¶åè®¿é—® http://localhost:8080/ ï¼ˆé»˜è®¤å°±æ˜¯ 8080 ç«¯å£ï¼Œå¯åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ï¼‰</p><blockquote><p>å¦å¤–:</p><p>æŸ¥çœ‹æœ¬æœºåœ°å€å‘½ä»¤å¼æ˜¯ï¼š<code>ifconfig</code></p><p>æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µï¼š<code>sudo netstat -tupln | grep ç«¯å£å·</code> http é»˜è®¤ç«¯å£å·æ˜¯ 80</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_jJj8" id="nginx-æ¶æ„æ¨¡å‹åŠå¸¸ç”¨å‘½ä»¤æ“ä½œ"></a>nginx æ¶æ„æ¨¡å‹åŠå¸¸ç”¨å‘½ä»¤æ“ä½œ<a class="hash-link" href="#nginx-æ¶æ„æ¨¡å‹åŠå¸¸ç”¨å‘½ä»¤æ“ä½œ" title="Direct link to heading">#</a></h2><p>master ä¸»è¿›ç¨‹ä¸‹é¢å¼€å¯ä¸€äº› worker å­è¿›ç¨‹</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_jJj8" id="nginx-å¸¸ç”¨å‘½ä»¤å‚æ•°"></a>nginx å¸¸ç”¨å‘½ä»¤ã€å‚æ•°<a class="hash-link" href="#nginx-å¸¸ç”¨å‘½ä»¤å‚æ•°" title="Direct link to heading">#</a></h3><ul><li><code>nginx -t</code> æµ‹è¯•é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œé…ç½®æ–‡ä»¶ä¿®æ”¹åå…ˆæ“ä½œéªŒè¯ï¼Œå†è¿›è¡Œåç»­æ“ä½œ</li><li><code>nginx -s reload</code> åŠ è½½æœ€æ–°é…ç½®ï¼Œç­‰å¾…å…¨éƒ¨å­è¿›ç¨‹ç»“æŸï¼Œç„¶åå¼€è¾Ÿçš„æ–°çš„å­è¿›ç¨‹ä½¿ç”¨æ–°çš„é…ç½®</li><li><code>nginx -s reopen</code> é‡æ–°æ‰“å¼€æ—¥å¿—ï¼Œé‡å‘½å access.log æ–‡ä»¶ï¼Œå¹¶é‡æ–°åˆ›å»ºæ–°çš„ access.log æ–‡ä»¶ï¼Œå†æ¬¡è®¿é—®æŸ¥çœ‹å˜åŒ–</li><li><code>nginx -s quit</code> ä¼˜é›…åœæ­¢ï¼Œç­‰å¾…å…¨éƒ¨å­è¿›ç¨‹å¤„ç†å®Œæ¯•ï¼Œä¸å†å¼€å¯æ–°çš„å­è¿›ç¨‹</li><li><code>nginx -s stop</code> ç«‹å³åœæ­¢ï¼Œä¸ç­‰å¾…å­è¿›ç¨‹å¤„ç†ï¼Œç«‹å³åœæ­¢æ‰€æœ‰å­è¿›ç¨‹åŠä¸»è¿›ç¨‹</li></ul><p>å¯¹äºå…¶ä»–æ“ä½œå‘½ä»¤ï¼Œå…·ä½“å¯ä»¥ä½¿ç”¨å¸®åŠ©å‘½ä»¤ nginx -h è¿›è¡ŒæŸ¥çœ‹</p><p>ç¡®è®¤å¯åŠ¨æˆåŠŸï¼Œç›´æ¥è®¿é—®å¯¹åº” ip åœ°å€ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ° nginx è¿”å›çš„é»˜è®¤ html é™æ€æ¬¢è¿ç•Œé¢äº†</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_jJj8" id="é…ç½®é¡¹åŠå…¶å«ä¹‰"></a>é…ç½®é¡¹åŠå…¶å«ä¹‰<a class="hash-link" href="#é…ç½®é¡¹åŠå…¶å«ä¹‰" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_jJj8" id="å…¨å±€é…ç½®åŒºåŸŸ"></a>å…¨å±€é…ç½®åŒºåŸŸ<a class="hash-link" href="#å…¨å±€é…ç½®åŒºåŸŸ" title="Direct link to heading">#</a></h3><p>å½“å‰ç¯å¢ƒä¸‹ï¼Œnginx çš„é…ç½®æ–‡ä»¶åœ¨ /etc/nginx æ–‡ä»¶å¤¹ä¸‹ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ nginx -V æŸ¥çœ‹ç‰ˆæœ¬ï¼Œé€‰é¡¹é…ç½®åŠæ¨¡å—é€‰é¡¹</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹é…ç½®æ–‡ä»¶çš„å„ä¸ªåŒºåŸŸï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ vim æ‰“å¼€è¿›è¡ŒæŸ¥çœ‹ã€‚</p><div class="codeBlockContainer_JfZT"><div class="codeBlockContent_4mTi"><pre tabindex="0" class="prism-code language-undefined codeBlock_P3uO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_+v3f"><span class="token-line" style="color:#393A34"><span class="token plain">main # å…¨å±€é…ç½®åŒºåŸŸï¼Œnginxæ ¸å¿ƒåŠŸèƒ½é…ç½®</span></span><span class="token-line" style="color:#393A34"><span class="token plain">events{ # events äº‹ä»¶åŒºï¼Œå­è¿›ç¨‹æ ¸å¿ƒé…ç½®</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">http{ # httpæœåŠ¡å™¨é…ç½®åŒº</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    server{ # ä¸åŒæœåŠ¡é…ç½®åŒº</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        location { # location ä¸åŒè¯·æ±‚è·¯å¾„é…ç½®åŒº</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">mail{ # é‚®ä»¶ä»£ç†é…ç½®åŒº</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    server{ # é‚®ä»¶æœåŠ¡é…ç½®åŒº</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ww6L clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_jJj8" id="é»˜è®¤é…ç½®è§£æ"></a>é»˜è®¤é…ç½®è§£æ<a class="hash-link" href="#é»˜è®¤é…ç½®è§£æ" title="Direct link to heading">#</a></h3><p>å¦‚æœé…ç½®é¡¹ä¸­å‡ºç°<code>include /xx/xx</code> ï¼Œæ˜¯æŒ‡å¼•å…¥å¤–éƒ¨é…ç½®é¡¹ï¼›# å·åˆ™æ˜¯æ³¨é‡Šå†…å®¹ã€‚</p><p>åœ¨å®‰è£…å®Œæ¯•åï¼Œå¯ä»¥ä½¿ç”¨ <code>egrep -v &quot;#|^$&quot; nginx.conf</code>æ‰“å°å»æ‰åŒ…å«#å·å’Œç©ºæ ¼çš„å†…å®¹ï¼Œå±•ç¤ºé»˜è®¤é…ç½®é€‰é¡¹è¿›è¡Œè§£è¯»ã€‚</p><div class="codeBlockContainer_JfZT"><div class="codeBlockContent_4mTi"><pre tabindex="0" class="prism-code language-undefined codeBlock_P3uO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_+v3f"><span class="token-line" style="color:#393A34"><span class="token plain">#è¿è¡Œç”¨æˆ·</span></span><span class="token-line" style="color:#393A34"><span class="token plain">user nobody;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#å¯åŠ¨è¿›ç¨‹,é€šå¸¸è®¾ç½®æˆå’Œcpuçš„æ•°é‡ç›¸ç­‰</span></span><span class="token-line" style="color:#393A34"><span class="token plain">worker_processes  1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#å…¨å±€é”™è¯¯æ—¥å¿—åŠPIDæ–‡ä»¶</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#error_log  logs/error.log;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#error_log  logs/error.log  notice;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#error_log  logs/error.log  info;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#pid        logs/nginx.pid;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">#å·¥ä½œæ¨¡å¼åŠè¿æ¥æ•°ä¸Šé™</span></span><span class="token-line" style="color:#393A34"><span class="token plain">events {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #epollæ˜¯å¤šè·¯å¤ç”¨IO(I/O Multiplexing)ä¸­çš„ä¸€ç§æ–¹å¼,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #ä»…ç”¨äºlinux2.6ä»¥ä¸Šå†…æ ¸,å¯ä»¥å¤§å¤§æé«˜nginxçš„æ€§èƒ½</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    use   epoll;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #å•ä¸ªåå°worker processè¿›ç¨‹çš„æœ€å¤§å¹¶å‘é“¾æ¥æ•°</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    worker_connections  1024;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # å¹¶å‘æ€»æ•°æ˜¯ worker_processes å’Œ worker_connections çš„ä¹˜ç§¯</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # å³ max_clients = worker_processes * worker_connections</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # åœ¨è®¾ç½®äº†åå‘ä»£ç†çš„æƒ…å†µä¸‹ï¼Œmax_clients = worker_processes * worker_connections / 4  ä¸ºä»€ä¹ˆ</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ä¸ºä»€ä¹ˆä¸Šé¢åå‘ä»£ç†è¦é™¤ä»¥4ï¼Œåº”è¯¥è¯´æ˜¯ä¸€ä¸ªç»éªŒå€¼</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # æ ¹æ®ä»¥ä¸Šæ¡ä»¶ï¼Œæ­£å¸¸æƒ…å†µä¸‹çš„Nginx Serverå¯ä»¥åº”ä»˜çš„æœ€å¤§è¿æ¥æ•°ä¸ºï¼š4 * 8000 = 32000</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # worker_connections å€¼çš„è®¾ç½®è·Ÿç‰©ç†å†…å­˜å¤§å°æœ‰å…³</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # å› ä¸ºå¹¶å‘å—IOçº¦æŸï¼Œmax_clientsçš„å€¼é¡»å°äºç³»ç»Ÿå¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æ•°</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # è€Œç³»ç»Ÿå¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æ•°å’Œå†…å­˜å¤§å°æˆæ­£æ¯”ï¼Œä¸€èˆ¬1GBå†…å­˜çš„æœºå™¨ä¸Šå¯ä»¥æ‰“å¼€çš„æ–‡ä»¶æ•°å¤§çº¦æ˜¯10ä¸‡å·¦å³</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # æˆ‘ä»¬æ¥çœ‹çœ‹360Må†…å­˜çš„VPSå¯ä»¥æ‰“å¼€çš„æ–‡ä»¶å¥æŸ„æ•°æ˜¯å¤šå°‘ï¼š</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # $ cat /proc/sys/fs/file-max</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # è¾“å‡º 34336</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 32000 &lt; 34336ï¼Œå³å¹¶å‘è¿æ¥æ€»æ•°å°äºç³»ç»Ÿå¯ä»¥æ‰“å¼€çš„æ–‡ä»¶å¥æŸ„æ€»æ•°ï¼Œè¿™æ ·å°±åœ¨æ“ä½œç³»ç»Ÿå¯ä»¥æ‰¿å—çš„èŒƒå›´ä¹‹å†…</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # æ‰€ä»¥ï¼Œworker_connections çš„å€¼éœ€æ ¹æ® worker_processes è¿›ç¨‹æ•°ç›®å’Œç³»ç»Ÿå¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æ€»æ•°è¿›è¡Œé€‚å½“åœ°è¿›è¡Œè®¾ç½®</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ä½¿å¾—å¹¶å‘æ€»æ•°å°äºæ“ä½œç³»ç»Ÿå¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æ•°ç›®</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # å…¶å®è´¨ä¹Ÿå°±æ˜¯æ ¹æ®ä¸»æœºçš„ç‰©ç†CPUå’Œå†…å­˜è¿›è¡Œé…ç½®</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # å½“ç„¶ï¼Œç†è®ºä¸Šçš„å¹¶å‘æ€»æ•°å¯èƒ½ä¼šå’Œå®é™…æœ‰æ‰€åå·®ï¼Œå› ä¸ºä¸»æœºè¿˜æœ‰å…¶ä»–çš„å·¥ä½œè¿›ç¨‹éœ€è¦æ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ulimit -SHn 65535</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">http {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #è®¾å®šmimeç±»å‹,ç±»å‹ç”±mime.typeæ–‡ä»¶å®šä¹‰</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    include    mime.types;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    default_type  application/octet-stream;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #è®¾å®šæ—¥å¿—æ ¼å¼</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    access_log  logs/access.log  main;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #sendfile æŒ‡ä»¤æŒ‡å®š nginx æ˜¯å¦è°ƒç”¨ sendfile å‡½æ•°ï¼ˆzero copy æ–¹å¼ï¼‰æ¥è¾“å‡ºæ–‡ä»¶ï¼Œ</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #å¯¹äºæ™®é€šåº”ç”¨ï¼Œå¿…é¡»è®¾ä¸º on,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #å¦‚æœç”¨æ¥è¿›è¡Œä¸‹è½½ç­‰åº”ç”¨ç£ç›˜IOé‡è´Ÿè½½åº”ç”¨ï¼Œå¯è®¾ç½®ä¸º offï¼Œ</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #ä»¥å¹³è¡¡ç£ç›˜ä¸ç½‘ç»œI/Oå¤„ç†é€Ÿåº¦ï¼Œé™ä½ç³»ç»Ÿçš„uptime.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sendfile     on;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #tcp_nopush     on;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #è¿æ¥è¶…æ—¶æ—¶é—´</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #keepalive_timeout  0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    keepalive_timeout  65;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    tcp_nodelay     on;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #å¼€å¯gzipå‹ç¼©</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    gzip  on;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    gzip_disable &quot;MSIE [1-6].&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #è®¾å®šè¯·æ±‚ç¼“å†²</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_header_buffer_size    128k;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    large_client_header_buffers  4 128k;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    #è®¾å®šè™šæ‹Ÿä¸»æœºé…ç½®</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    server {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        #ä¾¦å¬80ç«¯å£</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        listen    80;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        #å®šä¹‰ä½¿ç”¨ www.nginx.cnè®¿é—®</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        server_name  www.nginx.cn;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        #å®šä¹‰æœåŠ¡å™¨çš„é»˜è®¤ç½‘ç«™æ ¹ç›®å½•ä½ç½®</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        root html;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        #è®¾å®šæœ¬è™šæ‹Ÿä¸»æœºçš„è®¿é—®æ—¥å¿—</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        access_log  logs/nginx.access.log  main;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        #é»˜è®¤è¯·æ±‚</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        location / {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            #å®šä¹‰é¦–é¡µç´¢å¼•æ–‡ä»¶çš„åç§°</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            index index.php index.html index.htm;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        # å®šä¹‰é”™è¯¯æç¤ºé¡µé¢</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        error_page   500 502 503 504 /50x.html;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        location = /50x.html {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        #é™æ€æ–‡ä»¶ï¼Œnginxè‡ªå·±å¤„ç†</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        location ~ ^/(images|javascript|js|css|flash|media|static)/ {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            #è¿‡æœŸ30å¤©ï¼Œé™æ€æ–‡ä»¶ä¸æ€ä¹ˆæ›´æ–°ï¼Œè¿‡æœŸå¯ä»¥è®¾å¤§ä¸€ç‚¹ï¼Œ</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            #å¦‚æœé¢‘ç¹æ›´æ–°ï¼Œåˆ™å¯ä»¥è®¾ç½®å¾—å°ä¸€ç‚¹ã€‚</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            expires 30d;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        #PHP è„šæœ¬è¯·æ±‚å…¨éƒ¨è½¬å‘åˆ° FastCGIå¤„ç†. ä½¿ç”¨FastCGIé»˜è®¤é…ç½®.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        location ~ .php$ {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            fastcgi_pass 127.0.0.1:9000;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            fastcgi_index index.php;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            include fastcgi_params;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        #ç¦æ­¢è®¿é—® .htxxx æ–‡ä»¶</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            location ~ /.ht {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            deny all;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ww6L clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_jJj8" id="åå‘ä»£ç†"></a>åå‘ä»£ç†<a class="hash-link" href="#åå‘ä»£ç†" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_jJj8" id="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ<a class="hash-link" href="#åŸºæœ¬æ¦‚å¿µ" title="Direct link to heading">#</a></h3><p>åå‘ä»£ç†æ˜¯å®¢æˆ·ç«¯å»è¯·æ±‚èµ„æºè¢«ä»£ç†æœåŠ¡å™¨æ‹¦æˆªï¼Œåˆ†å‘åˆ°åˆç†çš„æœåŠ¡æˆ–æœåŠ¡å™¨ï¼Œç„¶åå‘é€ç»™å®¢æˆ·ç«¯ï¼Œå¯ä»¥ç†è§£ä¸ºä»£ç†çš„æ˜¯æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯ä¸çŸ¥é“è‡ªå·±è®¿é—®çš„æ˜¯çœŸå®åœ°æœåŠ¡å™¨è¿˜æ˜¯ä»£ç†æœåŠ¡å™¨ã€‚</p><p>æ­£å‘ä»£ç†æ˜¯å®¢æˆ·ç«¯å…ˆæŠŠè¯·æ±‚å‘é€ç»™æ­£å‘ä»£ç†æœåŠ¡å™¨ï¼Œæ­£å‘ä»£ç†æœåŠ¡å™¨å†å°†è¯·æ±‚å‘é€å‡ºå»ï¼Œè·å–åˆ°èµ„æºåï¼Œå†å°†èµ„æºå‘é€å›å®¢æˆ·ç«¯ï¼Œå¯ä»¥ç†è§£ä¸ºä»£ç†çš„æ˜¯å®¢æˆ·ç«¯ã€‚</p><p><strong>æ­£å‘ä»£ç†æ˜¯ä»£ç†å®¢æˆ·ç«¯ï¼Œåå‘ä»£ç†ä»£ç†çš„æ˜¯æœåŠ¡å™¨</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_jJj8" id="ç®€å•å®è·µ"></a>ç®€å•å®è·µ<a class="hash-link" href="#ç®€å•å®è·µ" title="Direct link to heading">#</a></h3><p>é…ç½®ä¸¤å°æœåŠ¡å™¨ï¼š</p><p>ä¸€å°ä¸“é—¨ç”¨æ¥åšä¸šåŠ¡é€»è¾‘çš„å“åº”ï¼Œè®¾ç½®ç«¯å£ 3000ï¼›ä¸€å°ä¸“é—¨ç”¨äºå¤„ç†å›¾ç‰‡èµ„æºå“åº”ï¼Œè®¾ç½®ç«¯å£ 3001</p><ul><li>ä¸šåŠ¡é€»è¾‘å“åº”ä»£ç ï¼š</li></ul><div class="codeBlockContainer_JfZT"><div class="codeBlockContent_4mTi js"><pre tabindex="0" class="prism-code language-js codeBlock_P3uO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_+v3f"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// node-server.js</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:3000&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;request&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">url</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;node----server&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;404&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ww6L clean-btn">Copy</button></div></div><ul><li>å›¾ç‰‡èµ„æºå“åº”ä»£ç </li></ul><div class="codeBlockContainer_JfZT"><div class="codeBlockContent_4mTi js"><pre tabindex="0" class="prism-code language-js codeBlock_P3uO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_+v3f"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// server-img.js</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> fs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;fs&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3001</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:3001&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;request&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;.&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ww6L clean-btn">Copy</button></div></div><p>å¯åŠ¨ä¸Šé¢ä¸¤ä¸ªæœåŠ¡åï¼Œå¯¹ nginx é…ç½®æ–‡ä»¶çš„ server é¡¹è¿›è¡Œä¿®æ”¹</p><div class="codeBlockContainer_JfZT"><div class="codeBlockContent_4mTi"><pre tabindex="0" class="prism-code language-undefined codeBlock_P3uO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_+v3f"><span class="token-line" style="color:#393A34"><span class="token plain">location / {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_pass http://127.0.0.1:3000;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">location ~ \.(jpg|png)$ {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_pass http://127.0.0.1:3001;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ww6L clean-btn">Copy</button></div></div><p>é€šè¿‡å‘½ä»¤ nginx -s reload é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥è®¿é—®ä¸åŒçš„å†…å®¹äº†ï¼Œç”± nginx ä»£ç†åˆ°ä¸åŒçš„å†…éƒ¨æœåŠ¡å™¨ï¼Œæä¾›ä¸åŒçš„èµ„æºå“åº”ã€‚</p><p>æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œè®©å“åº”å†…å®¹é›†æˆï¼Œå°† nginx é»˜è®¤å“åº”çš„ html å¤åˆ¶åˆ°è‡ªå·±çš„èµ„æºæ ¹ç›®å½•ä¸­ï¼Œç”±ä¸šåŠ¡é€»è¾‘æœåŠ¡å™¨è¿›è¡Œå¤„ç†åŠ è½½ã€‚</p><div class="codeBlockContainer_JfZT"><div class="codeBlockContent_4mTi html"><pre tabindex="0" class="prism-code language-html codeBlock_P3uO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_+v3f"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">node----server</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">./img/h-lf.jpg</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ww6L clean-btn">Copy</button></div></div><p>ä¿®æ”¹ä¸šåŠ¡é€»è¾‘ä»£ç ï¼ŒåŠ è½½ html é™æ€é¡µé¢èµ„æº</p><div class="codeBlockContainer_JfZT"><div class="codeBlockContent_4mTi js"><pre tabindex="0" class="prism-code language-js codeBlock_P3uO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_+v3f"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> http </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> fs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;fs&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:3000&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;request&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">url</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./index.html&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;error&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ww6L clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_jJj8" id="æœåŠ¡å™¨é›†ç¾¤å’Œè´Ÿè½½å‡è¡¡"></a>æœåŠ¡å™¨é›†ç¾¤å’Œè´Ÿè½½å‡è¡¡<a class="hash-link" href="#æœåŠ¡å™¨é›†ç¾¤å’Œè´Ÿè½½å‡è¡¡" title="Direct link to heading">#</a></h2><p>å†…ç½‘æœåŠ¡å™¨å› ä¸ºè¦å¤„ç†å¤§é‡çš„ä¸šåŠ¡é€»è¾‘ï¼Œå› æ­¤ï¼Œå†…ç½‘å•å°æœåŠ¡å™¨çš„å“åº”èƒ½åŠ›éå¸¸æœ‰é™ï¼Œä¸ºäº†æä¾›æ›´å¿«åŠ é€Ÿçš„å“åº”ï¼Œä¸€èˆ¬ä¼šåœ¨å†…ç½‘æ¶è®¾å¤šå°ä¸šåŠ¡é€»è¾‘å¤„ç†å™¨ï¼Œå½“æŸä¸€å°æ­£åœ¨å·¥ä½œæ—¶ï¼Œéœ€è¦ç”±å…¶ä»–çš„æ­£åœ¨é—²ç½®çš„æœåŠ¡å™¨æ¥å¤„ç†è¯·æ±‚å“åº”ï¼›</p><p>åç«¯å¤šå°ç›¸åŒçš„ä¸šåŠ¡é€»è¾‘æœåŠ¡å™¨ï¼Œè¢«ç§°ä¸ºæœåŠ¡å™¨é›†ç¾¤ï¼›è€Œå½“è¯·æ±‚åˆ°æ¥æ—¶ï¼Œåˆ°åº•ç”±å“ªå°æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œå–å†³äºä»£ç†è½¬å‘å“ªå°æœåŠ¡å™¨ï¼Œè¿™é¡¹èƒ½åŠ›ï¼Œå«åšè´Ÿè½½å‡è¡¡ã€‚</p><p>ä»¥å›¾ç‰‡å¤„ç†ä¸ºä¾‹ï¼Œå‡†å¤‡ä¸‰ä¸ªåç«¯æœåŠ¡ï¼š</p><ul><li>server-img1.js ç«¯å£ 3001</li><li>server-img2.js ç«¯å£ 3002</li><li>server-img3.js ç«¯å£ 3003</li></ul><p><code>kill 9 è¿›ç¨‹å·</code> æ€æ­»æŸä¸ªè¿›ç¨‹</p><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p><div class="codeBlockContainer_JfZT"><div class="codeBlockContent_4mTi"><pre tabindex="0" class="prism-code language-undefined codeBlock_P3uO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_+v3f"><span class="token-line" style="color:#393A34"><span class="token plain">upstream è‡ªå®šä¹‰è¿æ¥æ± åç§° {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    server ip:port weight=æƒé‡å€¼ï¼Œè¶Šå¤§å æ¯”è¶Šé«˜ max_fails=æœ€å¤§å¤±è´¥æ¬¡æ•° fail_timeout=è¶…æ—¶æ—¶é—´</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">serevr {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    location ~ \.(jpg|png)${</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        # åå‘ä»£ç†åˆ°è´Ÿè½½è¿æ¥æ± </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_pass http://è‡ªå®šä¹‰è¿æ¥æ± åç§°;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ww6L clean-btn">Copy</button></div></div><p>æ‰€ä»¥å®é™…çš„é…ç½®å°±æ˜¯</p><div class="codeBlockContainer_JfZT"><div class="codeBlockContent_4mTi"><pre tabindex="0" class="prism-code language-undefined codeBlock_P3uO thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_+v3f"><span class="token-line" style="color:#393A34"><span class="token plain"># å†™åœ¨serverå¤–é¢</span></span><span class="token-line" style="color:#393A34"><span class="token plain">upstream img_server{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # weight=1 æƒé‡æœ€ä½</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 127.0.0.1:3001 weight=1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 127.0.0.1:3002 weight=3;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 127.0.0.1:3003 weight=1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">server{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    location / {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_pass http://127.0.0.1:3000;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    location ~ \.(jpg|png)$ {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        # åå‘ä»£ç†åˆ°è´Ÿè½½å‡è¡¡æ± </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        proxy_pass http://img_server;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ww6L clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_jJj8" id="å‚è€ƒ"></a>å‚è€ƒ<a class="hash-link" href="#å‚è€ƒ" title="Direct link to heading">#</a></h2><ul><li><a href="https://juejin.cn/post/6844903684967825421" target="_blank" rel="noopener noreferrer">Nginx ä¸å‰ç«¯å¼€å‘</a></li><li><a href="https://juejin.cn/post/7007346707767754765" target="_blank" rel="noopener noreferrer">ğŸš— ğŸš— ğŸš— å‰ç«¯ä»”ä¹Ÿéœ€è¦æ‡‚çš„ nginx å†…å®¹</a></li><li><a href="https://juejin.cn/post/6844904144235413512" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6844904144235413512</a></li><li><a href="https://juejin.cn/post/6844904020360986631" target="_blank" rel="noopener noreferrer">å‰ç«¯ä¸èƒ½ä¸ä¼šçš„ Nginx å…¥é—¨ ï¼ˆå›¾æ–‡å¹¶èŒ‚çš„æœåŠ¡å™¨ç¯å¢ƒæ•™ç¨‹ï¼‰</a></li></ul></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/æ¢ç´¢/Nginx.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_UQtd" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_QETb"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/æ¢ç´¢/MySQL"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« MySQL</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/æ¢ç´¢/Docker"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Docker Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_GySF thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#nginx-æ¶æ„æ¨¡å‹åŠå¸¸ç”¨å‘½ä»¤æ“ä½œ" class="table-of-contents__link">nginx æ¶æ„æ¨¡å‹åŠå¸¸ç”¨å‘½ä»¤æ“ä½œ</a><ul><li><a href="#nginx-å¸¸ç”¨å‘½ä»¤å‚æ•°" class="table-of-contents__link">nginx å¸¸ç”¨å‘½ä»¤ã€å‚æ•°</a></li></ul></li><li><a href="#é…ç½®é¡¹åŠå…¶å«ä¹‰" class="table-of-contents__link">é…ç½®é¡¹åŠå…¶å«ä¹‰</a><ul><li><a href="#å…¨å±€é…ç½®åŒºåŸŸ" class="table-of-contents__link">å…¨å±€é…ç½®åŒºåŸŸ</a></li><li><a href="#é»˜è®¤é…ç½®è§£æ" class="table-of-contents__link">é»˜è®¤é…ç½®è§£æ</a></li></ul></li><li><a href="#åå‘ä»£ç†" class="table-of-contents__link">åå‘ä»£ç†</a><ul><li><a href="#åŸºæœ¬æ¦‚å¿µ" class="table-of-contents__link">åŸºæœ¬æ¦‚å¿µ</a></li><li><a href="#ç®€å•å®è·µ" class="table-of-contents__link">ç®€å•å®è·µ</a></li></ul></li><li><a href="#æœåŠ¡å™¨é›†ç¾¤å’Œè´Ÿè½½å‡è¡¡" class="table-of-contents__link">æœåŠ¡å™¨é›†ç¾¤å’Œè´Ÿè½½å‡è¡¡</a></li><li><a href="#å‚è€ƒ" class="table-of-contents__link">å‚è€ƒ</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">ç¬”è®°ğŸ“’</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_mu0C"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_mu0C"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_mu0C"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/physicshi" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_mu0C"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 wsgy, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.affe4ded.js"></script>
<script src="/assets/js/main.f9b84728.js"></script>
</body>
</html>